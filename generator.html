<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 16.0.0"/>
    <title>generator API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note{color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.tip{color:#0a3622;background-color:#d1e7dd;border-color:#a3cfbb;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%230a3622%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%206a6%206%200%201%201%2010.174%204.31c-.203.196-.359.4-.453.619l-.762%201.769A.5.5%200%200%201%2010.5%2013a.5.5%200%200%201%200%201%20.5.5%200%200%201%200%201l-.224.447a1%201%200%200%201-.894.553H6.618a1%201%200%200%201-.894-.553L5.5%2015a.5.5%200%200%201%200-1%20.5.5%200%200%201%200-1%20.5.5%200%200%201-.46-.302l-.761-1.77a2%202%200%200%200-.453-.618A5.98%205.98%200%200%201%202%206m6-5a5%205%200%200%200-3.479%208.592c.263.254.514.564.676.941L5.83%2012h4.342l.632-1.467c.162-.377.413-.687.676-.941A5%205%200%200%200%208%201%22/%3E%3C/svg%3E");}.pdoc .alert.important{color:#055160;background-color:#cff4fc;border-color:#9eeaf9;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23055160%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M2%200a2%202%200%200%200-2%202v12a2%202%200%200%200%202%202h12a2%202%200%200%200%202-2V2a2%202%200%200%200-2-2zm6%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.caution{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M11.46.146A.5.5%200%200%200%2011.107%200H4.893a.5.5%200%200%200-.353.146L.146%204.54A.5.5%200%200%200%200%204.893v6.214a.5.5%200%200%200%20.146.353l4.394%204.394a.5.5%200%200%200%20.353.146h6.214a.5.5%200%200%200%20.353-.146l4.394-4.394a.5.5%200%200%200%20.146-.353V4.893a.5.5%200%200%200-.146-.353zM8%204c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%204.995A.905.905%200%200%201%208%204m.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:27px;vertical-align:bottom;width:50px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>

            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>

            <h2>Contents</h2>
            <ul>
  <li><a href="#deploying-new-lookml-generator-changes">Deploying"> changes</a></li>
  <li><a href="#generate-command-explained-high-level-explanation"><code>md5-31ea153911041fb35f12596657c3cd4e</code"> Command Explained - High Level Explanation</a></li>
</ul></li>
<li><a href="#namespacesyaml"><code>md5-d8b78ed6318f22ec08ad736a33a345e5</code"></a>
<ul>
  <li><a href="#views"><code>md5-9f89d85992596fea17a25c9821abed28</code"></a></li>
  <li><a href="#explores"><code>md5-9dae492dc14c79384656df24dd8b3f2a</code"></a></li>
</ul></li>
<li><a href="#lookml-generator">lookml-generator</a>
<ul>
  <li><a href="#generating-namespace-listings">Generating Namespace Listings</a></li>
  <li><a href="#adding-custom-namespaces">Adding Custom Namespaces</a></li>
  <li><a href="#generating-lookml">Generating LookML</a></li>
  <li><a href="#setup">Setup</a></li>
  <li><a href="#testing-generation-locally">Testing generation locally</a></li>
  <li><a href="#container-development">Container Development</a></li>
  <li><a href="#deploying-new-lookml-generator-changes">Deploying new <code>lookml-generator</code> changes</a></li>
  <li><a href="#generate-command-explained-high-level-explanation"><code>generate</code> Command Explained - High Level Explanation</a></li>
</ul></li>
<li><a href="#namespacesyaml"><code>namespaces.yaml</code></a>
<ul>
  <li><a href="#views"><code>views</code></a></li>
  <li><a href="#explores"><code>explores</code></a></li>
</ul>


            <h2>Submodules</h2>
            <ul>
                    <li><a href="generator/dashboards.html">dashboards</a></li>
                    <li><a href="generator/dryrun.html">dryrun</a></li>
                    <li><a href="generator/explores.html">explores</a></li>
                    <li><a href="generator/lkml_update.html">lkml_update</a></li>
                    <li><a href="generator/lookml.html">lookml</a></li>
                    <li><a href="generator/metrics_utils.html">metrics_utils</a></li>
                    <li><a href="generator/namespaces.html">namespaces</a></li>
                    <li><a href="generator/operational_monitoring_utils.html">operational_monitoring_utils</a></li>
                    <li><a href="generator/spoke.html">spoke</a></li>
                    <li><a href="generator/utils.html">utils</a></li>
                    <li><a href="generator/views.html">views</a></li>
            </ul>

            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="function" href="#is_authenticated">is_authenticated</a>
            </li>
            <li>
                    <a class="function" href="#cli">cli</a>
            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22160%22%20viewBox%3D%220%200%20150%2080%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M132.316%2048.886c.276-4.679%202.342-6.698%204.409-7.982s4.27-1.165%206.751-1.055c1.586.07%203.044.156%204.222-.482%201.142-.619%202.026-1.932%202.162-3.739.268-3.576-1.929-5.368-5.006-5.551s-7.599.524-10.517%201.606c-4.455%201.652-8.588%206.606-9.552%208.992s-2.342%206.193-1.745%2010.873%202.664%209.221%205.878%2011.79%205.878%203.808%2010.103%204.312%203.444.229%206.062.229%205.006-2.202%204.914-4.909-2.296-5.001-4.501-4.863-3.077.505-5.281.229-7.715-2.064-7.899-9.451z%22%20fill%3D%22%23198754%22/%3E%3Ccircle%20cx%3D%22101.504%22%20cy%3D%2248.943%22%20r%3D%2214.208%22%20fill%3D%22none%22%20stroke%3D%22%23198754%22%20stroke-width%3D%229.354%22/%3E%3Cpath%20d%3D%22M87.81.002c-3.637.065-5.001.454-7.014%201.232s-3.443%201.363-6.3%204.282c-1.723%201.76-3.148%205.019-3.776%207.329-.413%201.521-.316%202.63-.316%202.63l-.195%2034.612c.065%205.774-6.755%208.305-9.612%208.37s-9.678-1.038-9.743-9.408%207.128-9.521%208.362-9.521c1.413-.13%202.526-.021%203.718-.016%202.071.009%204.157-.778%204.092-4.671s-4.157-4.736-4.157-4.736c-6.3-.843-11.43%202.206-11.43%202.206S40.917%2038.15%2041.372%2049.634%2051.568%2068.19%2061.311%2068.125s18.316-7.007%2018.445-17.193l.13-22.772c.046-2.291%202.683-3.644%204.476-4.203.745-.232%201.694-.274%201.694-.274l10.457-.13s4.871-.324%207.729-3.114%204.352-6.294%204.352-6.294.974-3.049.13-4.606-.195-1.233-2.792-3.309-8.573-4.477-8.573-4.477S91.447-.063%2087.81.002zM0%2047.169l.065%2028.417S0%2080.127%204.481%2079.997s5.072-3.866%205.049-4.152l-.113-28.482s1.624-7.656%209.937-7.721%2010.002%206.942%2010.002%208.499-.909%2010.51-9.093%2010.51c-.948%200-2.99-.567-4.145-.272-3.919%201-3.194%204.554-3.194%204.554s.065%205.061%207.404%204.996%2018.575-6.034%2018.575-19.074S26.953%2030.04%2019.549%2029.91%201.234%2035.296%200%2047.169z%22%20fill%3D%22%23198754%22/%3E%3Cg%20transform%3D%22matrix%28.325601%200%200%20.325256%20-10.32669%20-45.802786%29%22%3E%3Ccircle%20cx%3D%22297.554%22%20cy%3D%22172.286%22%20r%3D%2216.5%22%20fill%3D%22%23fff%22/%3E%3Cellipse%20cx%3D%22297.709%22%20cy%3D%22172.642%22%20rx%3D%2211.071%22%20ry%3D%2210.871%22%20fill%3D%22%23105a48%22/%3E%3Ccircle%20cx%3D%22304.104%22%20cy%3D%22167.667%22%20r%3D%224.5%22%20fill%3D%22%23fff%22/%3E%3C/g%3E%3Cpath%20d%3D%22M94.661%2017.032l.893-1.476s.99.714%201.916.925%201.575.114%202.955.114l14.565-.162c1.283-.032%203.085-.762%203.02-3.293s-.373-3.503-.373-3.503l1.283-.487s.52.503.877%201.573.309%201.995.292%202.66-.227%201.541-.227%201.541%201.564-.308%202.359-1.038.823-.779%201.489-1.508.812-.86.812-.86.552-.13.877.26.341.957.065%201.46-1.672%202.206-3.247%203.066-2.76%201.427-3.929%201.768-3.848.73-7.063.714l-10.944-.114s-2.143-.081-3.02-.373-2.241-.973-2.598-1.265z%22%20fill%3D%22%23d36d49%22/%3E%3Cg%20fill%3D%22%23105a48%22%3E%3Cellipse%20cx%3D%2293.052%22%20cy%3D%2243.567%22%20rx%3D%22.869%22%20ry%3D%221.014%22%20transform%3D%22rotate%28341.022%29%22/%3E%3Cellipse%20cx%3D%22104.3%22%20cy%3D%22-16.184%22%20rx%3D%22.865%22%20ry%3D%221.009%22%20transform%3D%22rotate%2814.786%29%22/%3E%3C/g%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
generator    </h1>

                        <div class="docstring"><p>Generate LookML.</p>

<h1 id="lookml-generator">lookml-generator</h1>

<p><a href="https://circleci.com/gh/mozilla/lookml-generator/?branch=main"><img src="https://circleci.com/gh/mozilla/lookml-generator.svg?style=svg" alt="mozilla" /></a></p>

<p>LookML Generator for Glean and Mozilla Data.</p>

<p>The lookml-generator has two important roles:</p>

<ol>
<li>Generate a listing of all Glean/Mozilla namespaces and their associated BigQuery tables</li>
<li>From that listing, generate LookML for views, explores, and dashboards and push those to the <a href="https://github.com/mozilla/looker-hub">Look Hub project</a></li>
</ol>

<h2 id="generating-namespace-listings">Generating Namespace Listings</h2>

<p>At Mozilla, a namespace is a single functional area that is represented in Looker with (usually) one model*.
Each Glean application is self-contained within a single namespace, containing the data from <a href="https://probeinfo.telemetry.mozilla.org/v2/glean/app-listings">across that application's channels</a>.
We also support custom namespaces, which can use wildcards to denote their BigQuery datasets and tables. These are described in <code>custom-namespaces.yaml</code>.</p>

<p><img src="https://github.com/mozilla/lookml-generator/blob/main/architecture/namespaces.jpg?raw=true" alt="alt text" /></p>

<blockquote>
  <p>*  Though namespaces are not limited to a single model, we advise it for clarity's sake.</p>
</blockquote>

<h2 id="adding-custom-namespaces">Adding Custom Namespaces</h2>

<p>Custom namespaces need to be defined explicitly in <code>custom-namespaces.yaml</code>. For each namespace views and explores to be generated need to be specified.</p>

<p>Make sure the custom namespaces is _not_ listed in <code>namespaces-disallowlist.yaml</code>.</p>

<p>Once changes have been approved and merged, the <a href="#deploying-new-lookml-generator-changes">lookml-generator changes can get deployed</a>.</p>

<h2 id="generating-lookml">Generating LookML</h2>

<p>Once we know which tables are associated with which namespaces, we can generate LookML files and update our Looker instance.</p>

<p>Lookml-generator generates LookML based on both the BigQuery schema and manual changes. For example, we would want to add <code>city</code> drill-downs for all <code>country</code> fields.
<img src="https://github.com/mozilla/lookml-generator/blob/main/architecture/lookml.jpg?raw=true" alt="alt text" /></p>

<h3 id="pushing-changes-to-dev-branches">Pushing Changes to Dev Branches</h3>

<p>In addition to pushing new lookml to the <a href="https://github.com/mozilla/looker-hub">main branch</a>, we reset the dev branches to also
point to the commit at <code>main</code>. This only happens during production deployment runs.</p>

<p>To automate this process for your dev branch, add it to <a href="https://github.com/mozilla/lookml-generator/tree/main/bin/dev_branches">this file</a>.
You can edit that file in your browser. Open a PR and tag <a href="https://github.com/orgs/mozilla/teams/data-looker">data-looker</a> for review.
You can find your dev branch by going to <a href="https://mozilla.cloud.looker.com">Looker</a>, entering development mode, opening the <a href="https://mozilla.cloud.looker.com/projects/looker-hub"><code>looker-hub</code></a>
project, clicking the "Git Actions" icon, and finding your personal branch in the "Current Branch" dropdown.</p>

<h2 id="setup">Setup</h2>

<p>Ensure Python 3.10+ is available on your machine (see <a href="https://docs.python-guide.org/starting/install3/osx/">this guide</a> for instructions if you're on a mac and haven't installed anything other than the default system Python.)</p>

<p>You will also need the Google Cloud SDK with valid credentials.
After setting up the Google Cloud SDK, run:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code>gcloud<span class="w"> </span>config<span class="w"> </span><span class="nb">set</span><span class="w"> </span>project<span class="w"> </span>moz-fx-data-shared-prod
gcloud<span class="w"> </span>auth<span class="w"> </span>login<span class="w"> </span>--update-adc
</code></pre>
</div>

<p>Install requirements in a Python venv</p>

<div class="pdoc-code codehilite">
<pre><span></span><code>python3.10<span class="w"> </span>-m<span class="w"> </span>venv<span class="w"> </span>venv/
venv/bin/pip<span class="w"> </span>install<span class="w"> </span>--no-deps<span class="w"> </span>-r<span class="w"> </span>requirements.txt
</code></pre>
</div>

<p>Update requirements when they change with <code>pip-sync</code></p>

<div class="pdoc-code codehilite">
<pre><span></span><code>venv/bin/pip-sync
</code></pre>
</div>

<p>Setup pre-commit hooks</p>

<div class="pdoc-code codehilite">
<pre><span></span><code>venv/bin/pre-commit<span class="w"> </span>install
</code></pre>
</div>

<p>Run unit tests and linters</p>

<div class="pdoc-code codehilite">
<pre><span></span><code>venv/bin/pytest
</code></pre>
</div>

<p>Run integration tests</p>

<div class="pdoc-code codehilite">
<pre><span></span><code>venv/bin/pytest<span class="w"> </span>-m<span class="w"> </span>integration
</code></pre>
</div>

<p>Note that the integration tests require a valid login to BigQuery to succeed.</p>

<h2 id="testing-generation-locally">Testing generation locally</h2>

<p>You can test namespace generation by running:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code>./bin/generator<span class="w"> </span>namespaces
</code></pre>
</div>

<p>To generate the actual lookml (in <code>looker-hub</code>), run:</p>

<div class="pdoc-code codehilite">
<pre><span></span><code>./bin/generator<span class="w"> </span>lookml
</code></pre>
</div>

<h2 id="container-development">Container Development</h2>

<p>Most code changes will not require changes to the generation script or container.
However, you can test it locally. The following script will test generation, pushing
a new branch to the <code>looker-hub</code> repository:</p>

<pre><code>export HUB_BRANCH_PUBLISH="yourname-generation-test-1"
export GIT_SSH_KEY_BASE64=$(cat ~/.ssh/id_rsa | base64)
make build &amp;&amp; make run
</code></pre>

<h2 id="deploying-new-lookml-generator-changes">Deploying new <code>lookml-generator</code> changes</h2>

<p><code>lookml-generator</code> runs daily to update the <code>looker-hub</code> and <code>looker-spoke-default</code> code. Changes
to the underlying tables should automatically propogate to their respective views and explores.</p>

<p>Airflow updates the two repositories <a href="https://github.com/mozilla/telemetry-airflow/blob/main/dags/probe_scraper.py#L320">each morning</a>.
If you need your changes deployed quickly, wait for the container to build after you merge to
<code>main</code>, and re-run the task in Airflow (<code>lookml_generator</code>, in the <code>probe_scraper</code> DAG).</p>

<h2 id="generate-command-explained-high-level-explanation"><code>generate</code> Command Explained - High Level Explanation</h2>

<p>When <code>make run</code> is executed a Docker container is spun up using the latest <code>lookml-generator</code> Docker image on your machine and runs the <a href="bin/generate"><code>generate</code> script</a> using configuration defined at the top of the script unless <a href="./docker-compose.yml#L13-L25">overridden using environment variables</a> (see the <a href="#container-development">Container Development</a> section above).</p>

<p>Next, the process authenticates with GitHub, clones the <a href="https://github.com/mozilla/looker-hub"><code>looker-hub</code> repository</a>, and creates the branch defined in the <code>HUB_BRANCH_PUBLISH</code> config variable both locally and in the remote. Then it proceeds to checkout into the looker-hub <code>base</code> branch and pulls it from the remote.</p>

<p>Once the setup is done, the process generates <code>namespaces.yaml</code> and uses it to generate LookML code. A git diff is executed to ensure that the files that already exist in the <code>base</code> branch are not being modified. If changes are detected then the process exists with an error code. Otherwise, it proceeds to create a commit and push it to the remote dev branch created earlier.</p>

<p>When following the <code>Container Development</code> steps, the entire process results in a dev branch in <code>looker-hub</code> with brand new generated LookML code which can be tested by going to Looker, switching to the "development mode" and selecting the dev branch just created/updated by this command. This will result in Looker using the brand new LookML code just generated. Otherwise, changes merged into <code>main</code> in this repo will become available on looker-hub <code>main</code> when the scheduled Airflow job runs.</p>

<h1 id="namespacesyaml"><code>namespaces.yaml</code></h1>

<p>We use <a href="https://github.com/mozilla/looker-hub/blob/main/namespaces.yaml"><code>namespaces.yaml</code></a> as the declarative listing of the Looker namespaces generated by this repository.</p>

<p>Each entry in <code>namespaces.yaml</code> represents a namespace, and has the following properties:</p>

<ul>
<li><code>owners</code> (string): The owners are the people who will have control over the associated Namespace folder in Looker. It is up to them to decide which dashboards to "promote" to their shared folder.</li>
<li><code>pretty_name</code> (string): The pretty name is used in most places where the namespace's name is seen, e.g. in the explore drop-down and folder name.</li>
<li><code>glean_app</code> (bool): Whether or not this namespace represents a Glean Application.</li>
<li><code>connection</code> (optional string): The database connection to use, as named in Looker. Defaults to <code>telemetry</code>.</li>
<li><code>views</code> (object): The LookML View files that will be generated. More detailed info below.</li>
<li><code>explores</code> (object): The LookML Explore files that will be generated. More detailed info below.</li>
</ul>

<h2 id="views"><code>views</code></h2>

<p>Each View entry is actually a LookML view file that will be generated.
Each LookML View file can contain multiple Looker Views; the idea here is that these views are related and used together. By convention, the first view in the file is the base view (i.e. associated join views folllow after the explore containing the base dimension and metrics).</p>

<ul>
<li><code>type</code>: The type of the view, e.g. <code>glean_ping_view</code>.</li>
<li><code>tables</code>: This field is used in a few ways, depending on the associated View type.</li>
</ul>

<p>For <code>GleanPingView</code> and <code>PingView</code>, <code>tables</code> represents all of the associated channels for that view. Each table will have a <code>channel</code> and <code>table</code> entry. Only a single view will be created in the LookML File.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="nt">tables</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">channel</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">release</span>
<span class="w">    </span><span class="nt">table</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mozdata.org_mozilla_firefox.metrics</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">channel</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">nightly</span>
<span class="w">    </span><span class="nt">table</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mozdata.org_mozilla_fenix.metrics</span>
</code></pre>
</div>

<p>For <code>ClientCountView</code> and <code>GrowthAccountingView</code>, <code>tables</code> will have a single entry, with the name of the table the Looker View is based off of. Only a single Looker View will be created.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="nt">tables</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">table</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mozdata.org_mozilla_firefox.baseline_clients_last_seen</span>
</code></pre>
</div>

<p>For <code>FunnelAnalysisView</code>, only the first list entry is used; inside that entry, each value represents a Looker View that is created. The key is the name of the view, the value is the Looker View or BQ View it is derived from.
In the following example, 4 views will be created in the view file: <code>funnel_analysis</code>, <code>event_types</code>, <code>event_type_1</code> and <code>event_type_2</code>.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="nt">tables</span><span class="p">:</span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">funnel_analysis</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">events_daily_table</span>
<span class="w">    </span><span class="nt">event_types</span><span class="p">:</span><span class="w"> </span><span class="err">`</span><span class="l l-Scalar l-Scalar-Plain">mozdata.glean_app.event_types`</span>
<span class="w">    </span><span class="nt">event_type_1</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">event_types</span>
<span class="w">    </span><span class="nt">event_type_2</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">event_types</span>
</code></pre>
</div>

<h2 id="explores"><code>explores</code></h2>

<p>Each Explore entry is a single file, sometimes containing multiple explores within it (mainly for things like changing suggestions).</p>

<ul>
<li><code>type</code> - The type of the explore, e.g. <code>growth_accounting_explore</code>.</li>
<li><code>views</code> - The views that this is based on. Generally, the allowed keys here are:
<ul>
<li><code>base_view</code>: The base view is the one we are basing this Explore on, using <a href="https://docs.looker.com/reference/explore-params/view_name"><code>view_name</code></a>.</li>
<li><code>extended_view*</code>: Any views we include in the <code>base_view</code> are added as these. It could be one (<code>extended_view</code>) or multiple (<code>extended_view_1</code>).</li>
<li><code>joined_view*</code>: Any other view we are going to join to this one. _This is only required if the joined view is not defined in the same view file as <code>base_view</code>._</li>
</ul></li>
</ul>

<p>It may not necessarily be desirable to list all of the views and explores in the <code>namespace.yaml</code> (e.g. suggest explores specific to a view). In these cases, it is useful to adopt the convention where the first view is the primary view for the explore.</p>
</div>

                        <input id="mod-generator-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-generator-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos"> 1</span></a><span class="sd">&quot;&quot;&quot;Generate LookML.</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos"> 2</span></a>
</span><span id="L-3"><a href="#L-3"><span class="linenos"> 3</span></a><span class="sd">.. include:: ../README.md</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos"> 4</span></a><span class="sd">.. include:: ../architecture/namespaces_yaml.md</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos"> 5</span></a><span class="sd">&quot;&quot;&quot;</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos"> 6</span></a>
</span><span id="L-7"><a href="#L-7"><span class="linenos"> 7</span></a><span class="n">__docformat__</span> <span class="o">=</span> <span class="s2">&quot;restructuredtext&quot;</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos"> 8</span></a>
</span><span id="L-9"><a href="#L-9"><span class="linenos"> 9</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">sys</span>
</span><span id="L-10"><a href="#L-10"><span class="linenos">10</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">warnings</span>
</span><span id="L-11"><a href="#L-11"><span class="linenos">11</span></a>
</span><span id="L-12"><a href="#L-12"><span class="linenos">12</span></a><span class="kn">import</span><span class="w"> </span><span class="nn">click</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos">13</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">google.auth.exceptions</span><span class="w"> </span><span class="kn">import</span> <span class="n">DefaultCredentialsError</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos">14</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">google.cloud</span><span class="w"> </span><span class="kn">import</span> <span class="n">bigquery</span>
</span><span id="L-15"><a href="#L-15"><span class="linenos">15</span></a>
</span><span id="L-16"><a href="#L-16"><span class="linenos">16</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.lookml</span><span class="w"> </span><span class="kn">import</span> <span class="n">lookml</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos">17</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.namespaces</span><span class="w"> </span><span class="kn">import</span> <span class="n">namespaces</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos">18</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.spoke</span><span class="w"> </span><span class="kn">import</span> <span class="n">update_spoke</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos">19</span></a>
</span><span id="L-20"><a href="#L-20"><span class="linenos">20</span></a>
</span><span id="L-21"><a href="#L-21"><span class="linenos">21</span></a><span class="k">def</span><span class="w"> </span><span class="nf">is_authenticated</span><span class="p">():</span>
</span><span id="L-22"><a href="#L-22"><span class="linenos">22</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if the user is authenticated to GCP.&quot;&quot;&quot;</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos">23</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos">24</span></a>        <span class="n">bigquery</span><span class="o">.</span><span class="n">Client</span><span class="p">()</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos">25</span></a>    <span class="k">except</span> <span class="n">DefaultCredentialsError</span><span class="p">:</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos">26</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="L-27"><a href="#L-27"><span class="linenos">27</span></a>    <span class="k">return</span> <span class="kc">True</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos">28</span></a>
</span><span id="L-29"><a href="#L-29"><span class="linenos">29</span></a>
</span><span id="L-30"><a href="#L-30"><span class="linenos">30</span></a><span class="k">def</span><span class="w"> </span><span class="nf">cli</span><span class="p">(</span><span class="n">prog_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos">31</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate and run CLI.&quot;&quot;&quot;</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos">32</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_authenticated</span><span class="p">():</span>
</span><span id="L-33"><a href="#L-33"><span class="linenos">33</span></a>        <span class="nb">print</span><span class="p">(</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos">34</span></a>            <span class="s2">&quot;Authentication to GCP required. Run `gcloud auth login --update-adc` &quot;</span>
</span><span id="L-35"><a href="#L-35"><span class="linenos">35</span></a>            <span class="s2">&quot;and check that the project is set correctly.&quot;</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos">36</span></a>        <span class="p">)</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos">37</span></a>        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="L-38"><a href="#L-38"><span class="linenos">38</span></a>
</span><span id="L-39"><a href="#L-39"><span class="linenos">39</span></a>    <span class="n">commands</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="L-40"><a href="#L-40"><span class="linenos">40</span></a>        <span class="s2">&quot;namespaces&quot;</span><span class="p">:</span> <span class="n">namespaces</span><span class="p">,</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos">41</span></a>        <span class="s2">&quot;lookml&quot;</span><span class="p">:</span> <span class="n">lookml</span><span class="p">,</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos">42</span></a>        <span class="s2">&quot;update-spoke&quot;</span><span class="p">:</span> <span class="n">update_spoke</span><span class="p">,</span>
</span><span id="L-43"><a href="#L-43"><span class="linenos">43</span></a>    <span class="p">}</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos">44</span></a>
</span><span id="L-45"><a href="#L-45"><span class="linenos">45</span></a>    <span class="nd">@click</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="n">commands</span><span class="o">=</span><span class="n">commands</span><span class="p">)</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos">46</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">group</span><span class="p">():</span>
</span><span id="L-47"><a href="#L-47"><span class="linenos">47</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;CLI interface for lookml automation.&quot;&quot;&quot;</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos">48</span></a>
</span><span id="L-49"><a href="#L-49"><span class="linenos">49</span></a>    <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos">50</span></a>        <span class="s2">&quot;ignore&quot;</span><span class="p">,</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos">51</span></a>        <span class="s2">&quot;Your application has authenticated using end user credentials&quot;</span><span class="p">,</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos">52</span></a>        <span class="n">module</span><span class="o">=</span><span class="s2">&quot;google.auth._default&quot;</span><span class="p">,</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos">53</span></a>    <span class="p">)</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos">54</span></a>
</span><span id="L-55"><a href="#L-55"><span class="linenos">55</span></a>    <span class="n">group</span><span class="p">(</span><span class="n">prog_name</span><span class="o">=</span><span class="n">prog_name</span><span class="p">)</span>
</span></pre></div>


            </section>
                <section id="is_authenticated">
                            <input id="is_authenticated-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">is_authenticated</span><span class="signature pdoc-code condensed">(<span class="return-annotation">):</span></span>

                <label class="view-source-button" for="is_authenticated-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#is_authenticated"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="is_authenticated-22"><a href="#is_authenticated-22"><span class="linenos">22</span></a><span class="k">def</span><span class="w"> </span><span class="nf">is_authenticated</span><span class="p">():</span>
</span><span id="is_authenticated-23"><a href="#is_authenticated-23"><span class="linenos">23</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Check if the user is authenticated to GCP.&quot;&quot;&quot;</span>
</span><span id="is_authenticated-24"><a href="#is_authenticated-24"><span class="linenos">24</span></a>    <span class="k">try</span><span class="p">:</span>
</span><span id="is_authenticated-25"><a href="#is_authenticated-25"><span class="linenos">25</span></a>        <span class="n">bigquery</span><span class="o">.</span><span class="n">Client</span><span class="p">()</span>
</span><span id="is_authenticated-26"><a href="#is_authenticated-26"><span class="linenos">26</span></a>    <span class="k">except</span> <span class="n">DefaultCredentialsError</span><span class="p">:</span>
</span><span id="is_authenticated-27"><a href="#is_authenticated-27"><span class="linenos">27</span></a>        <span class="k">return</span> <span class="kc">False</span>
</span><span id="is_authenticated-28"><a href="#is_authenticated-28"><span class="linenos">28</span></a>    <span class="k">return</span> <span class="kc">True</span>
</span></pre></div>


            <div class="docstring"><p>Check if the user is authenticated to GCP.</p>
</div>


                </section>
                <section id="cli">
                            <input id="cli-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">cli</span><span class="signature pdoc-code condensed">(<span class="param"><span class="n">prog_name</span><span class="o">=</span><span class="kc">None</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="cli-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#cli"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="cli-31"><a href="#cli-31"><span class="linenos">31</span></a><span class="k">def</span><span class="w"> </span><span class="nf">cli</span><span class="p">(</span><span class="n">prog_name</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
</span><span id="cli-32"><a href="#cli-32"><span class="linenos">32</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate and run CLI.&quot;&quot;&quot;</span>
</span><span id="cli-33"><a href="#cli-33"><span class="linenos">33</span></a>    <span class="k">if</span> <span class="ow">not</span> <span class="n">is_authenticated</span><span class="p">():</span>
</span><span id="cli-34"><a href="#cli-34"><span class="linenos">34</span></a>        <span class="nb">print</span><span class="p">(</span>
</span><span id="cli-35"><a href="#cli-35"><span class="linenos">35</span></a>            <span class="s2">&quot;Authentication to GCP required. Run `gcloud auth login --update-adc` &quot;</span>
</span><span id="cli-36"><a href="#cli-36"><span class="linenos">36</span></a>            <span class="s2">&quot;and check that the project is set correctly.&quot;</span>
</span><span id="cli-37"><a href="#cli-37"><span class="linenos">37</span></a>        <span class="p">)</span>
</span><span id="cli-38"><a href="#cli-38"><span class="linenos">38</span></a>        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span><span id="cli-39"><a href="#cli-39"><span class="linenos">39</span></a>
</span><span id="cli-40"><a href="#cli-40"><span class="linenos">40</span></a>    <span class="n">commands</span> <span class="o">=</span> <span class="p">{</span>
</span><span id="cli-41"><a href="#cli-41"><span class="linenos">41</span></a>        <span class="s2">&quot;namespaces&quot;</span><span class="p">:</span> <span class="n">namespaces</span><span class="p">,</span>
</span><span id="cli-42"><a href="#cli-42"><span class="linenos">42</span></a>        <span class="s2">&quot;lookml&quot;</span><span class="p">:</span> <span class="n">lookml</span><span class="p">,</span>
</span><span id="cli-43"><a href="#cli-43"><span class="linenos">43</span></a>        <span class="s2">&quot;update-spoke&quot;</span><span class="p">:</span> <span class="n">update_spoke</span><span class="p">,</span>
</span><span id="cli-44"><a href="#cli-44"><span class="linenos">44</span></a>    <span class="p">}</span>
</span><span id="cli-45"><a href="#cli-45"><span class="linenos">45</span></a>
</span><span id="cli-46"><a href="#cli-46"><span class="linenos">46</span></a>    <span class="nd">@click</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="n">commands</span><span class="o">=</span><span class="n">commands</span><span class="p">)</span>
</span><span id="cli-47"><a href="#cli-47"><span class="linenos">47</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">group</span><span class="p">():</span>
</span><span id="cli-48"><a href="#cli-48"><span class="linenos">48</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;CLI interface for lookml automation.&quot;&quot;&quot;</span>
</span><span id="cli-49"><a href="#cli-49"><span class="linenos">49</span></a>
</span><span id="cli-50"><a href="#cli-50"><span class="linenos">50</span></a>    <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span>
</span><span id="cli-51"><a href="#cli-51"><span class="linenos">51</span></a>        <span class="s2">&quot;ignore&quot;</span><span class="p">,</span>
</span><span id="cli-52"><a href="#cli-52"><span class="linenos">52</span></a>        <span class="s2">&quot;Your application has authenticated using end user credentials&quot;</span><span class="p">,</span>
</span><span id="cli-53"><a href="#cli-53"><span class="linenos">53</span></a>        <span class="n">module</span><span class="o">=</span><span class="s2">&quot;google.auth._default&quot;</span><span class="p">,</span>
</span><span id="cli-54"><a href="#cli-54"><span class="linenos">54</span></a>    <span class="p">)</span>
</span><span id="cli-55"><a href="#cli-55"><span class="linenos">55</span></a>
</span><span id="cli-56"><a href="#cli-56"><span class="linenos">56</span></a>    <span class="n">group</span><span class="p">(</span><span class="n">prog_name</span><span class="o">=</span><span class="n">prog_name</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Generate and run CLI.</p>
</div>


                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>